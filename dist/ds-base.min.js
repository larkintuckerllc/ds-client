!function(){"use strict";function t(t){if(void 0===t||"string"!=typeof t)throw 400;f=t}function e(t,e){if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;w=t,l=e}function o(t,e){function o(){function o(t){function o(t){t||(i.style.display="none",e())}t.preventDefault();var a=i.querySelector("#ds_base_login__username").value,r=i.querySelector("#ds_base_login__password").value;a&&r&&n(a,r,o)}var i=document.createElement("form");i.id="ds_base_login",i.innerHTML=['<input id="ds_base_login__username" type="text" placeholder="Username">','<input id="ds_base_login__password" type="password" placeholder="Password">','<button type="submit">Login</button>'].join("\n"),i.addEventListener("submit",o),t.appendChild(i)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;a()?e():o()}function n(t,e,o){function n(){if(4===r.readyState){if(200!==r.status)return o(r.status?r.status:500);var t;try{t=JSON.parse(r.responseText).token}catch(e){return o(500)}return t?(window.localStorage.setItem("ds_token",t),o(null)):o(500)}}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;if(void 0===o||"function"!=typeof o)throw 400;var i=f+":3010/api/login",a="username="+t+"&password="+e,r=new XMLHttpRequest;r.open("POST",i,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=n,r.send(a)}function i(){window.localStorage.removeItem("ds_token"),p()}function a(){return null!==window.localStorage.getItem("ds_token")}function r(t,e){function o(){if(4===n.readyState){if(200!==n.status)return e(n.status?n.status:500);try{return e(null,JSON.parse(n.responseText))}catch(t){return e(415,null)}}}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;var n=new window.XMLHttpRequest;n.onreadystatechange=o,n.open("GET","/upload/"+w+"-"+l+"/"+t,!0),n.send()}function s(t,e,o){function n(){if(4===s.readyState)return o(200!==s.status?s.status?s.status:500:null)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;if(void 0===o||"function"!=typeof o)throw 400;var i=new window.Blob([window.JSON.stringify(t)],{type:"application/json"}),a=new window.FormData,r=window.localStorage.getItem("ds_token"),s=new window.XMLHttpRequest;a.append("user",w),a.append("repo",l),a.append("file",i,e),s.open("POST",f+":3010/api/upload",!0),s.setRequestHeader("Authorization","bearer "+r),s.onreadystatechange=n,s.send(a)}function d(t,e,o){function n(){if(4===r.readyState)return e(200!==r.status?r.status?r.status:500:null)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;if(void 0!==o&&"string"!=typeof o)throw 400;var i=new window.FormData,a=window.localStorage.getItem("ds_token"),r=new window.XMLHttpRequest;i.append("user",w),i.append("repo",l),i.append("file",t),void 0!==o&&i.append("filename",o),r.open("POST",f+":3010/api/upload",!0),r.setRequestHeader("Authorization","bearer "+a),r.onreadystatechange=n,r.send(i)}function u(t,e){function o(){if(4===i.readyState)return e(200!==i.status?i.status?i.status:500:null)}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;var n=window.localStorage.getItem("ds_token"),i=new window.XMLHttpRequest;i.open("POST",f+":3010/api/delete",!0),i.setRequestHeader("Authorization","bearer "+n),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=o,i.send(window.JSON.stringify({user:w,repo:l,filename:"example.pdf"}))}function p(){window.location.reload()}var f,w,l,c={};c.setBase=t,c.setRepo=e,c.addAdminTools=o,c.login=n,c.logout=i,c.authenticated=a,c.downloadObject=r,c.uploadObject=s,c.uploadFile=d,c.remove=u,window.ds=c}();