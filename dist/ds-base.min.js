!function(){"use strict";function t(t){if(void 0===t||"string"!=typeof t)throw 400;v=t}function e(t,e){if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;_=t,m=e}function n(t,e){function n(){function n(t){function n(t){t||(a.style.display="none",e())}t.preventDefault();var s=a.querySelector("#ds_base_login__username").value,r=a.querySelector("#ds_base_login__password").value;s&&r&&o(s,r,n)}var a=document.createElement("form");a.id="ds_base_login",a.innerHTML=['<input id="ds_base_login__username" type="text" placeholder="Username">','<input id="ds_base_login__password" type="password" placeholder="Password">','<button type="submit">Login</button>'].join("\n"),a.addEventListener("submit",n),t.appendChild(a)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;s()?e():n()}function o(t,e,n){function o(){if(4===r.readyState){if(200!==r.status)return n(r.status?r.status:500);var t;try{t=JSON.parse(r.responseText).token}catch(e){return n(500)}return t?(window.localStorage.setItem("ds_token",t),n(null)):n(500)}}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;if(void 0===n||"function"!=typeof n)throw 400;var a=v+":3010/api/login",s="username="+t+"&password="+e,r=new XMLHttpRequest;r.open("POST",a,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=o,r.send(s)}function a(){window.localStorage.removeItem("ds_token"),h()}function s(){return null!==window.localStorage.getItem("ds_token")}function r(){return window.localStorage.getItem("ds_token")}function i(t,e){function n(){if(4===a.readyState)return 200!==a.status?e(a.status?a.status:500):(window.localStorage.setItem("ds_token",t),e(null))}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;var o=v+":3010/api/valid",a=new XMLHttpRequest;a.open("POST",o,!0),a.setRequestHeader("Authorization","bearer "+t),a.setRequestHeader("Content-type","application/json"),a.onreadystatechange=n,a.send(JSON.stringify({}))}function u(t,e){function n(){if(4===o.readyState){if(200!==o.status)return e(o.status?o.status:500);try{return e(null,JSON.parse(o.responseText))}catch(t){return e(415,null)}}}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;var o=new window.XMLHttpRequest;o.onreadystatechange=n,o.open("GET","/upload/"+_+"-"+m+"/"+t,!0),o.send()}function d(t,e,n){function o(){if(4===i.readyState)return n(200!==i.status?i.status?i.status:500:null)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;if(void 0===n||"function"!=typeof n)throw 400;var a=new window.Blob([window.JSON.stringify(t)],{type:"application/json"}),s=new window.FormData,r=window.localStorage.getItem("ds_token"),i=new window.XMLHttpRequest;s.append("user",_),s.append("repo",m),s.append("file",a,e),i.open("POST",v+":3010/api/upload",!0),i.setRequestHeader("Authorization","bearer "+r),i.onreadystatechange=o,i.send(s)}function p(t,e,n){function o(){if(4===r.readyState)return e(200!==r.status?r.status?r.status:500:null)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;if(void 0!==n&&"string"!=typeof n)throw 400;var a=new window.FormData,s=window.localStorage.getItem("ds_token"),r=new window.XMLHttpRequest;a.append("user",_),a.append("repo",m),a.append("file",t),void 0!==n&&a.append("filename",n),r.open("POST",v+":3010/api/upload",!0),r.setRequestHeader("Authorization","bearer "+s),r.onreadystatechange=o,r.send(a)}function f(t,e){function n(){if(4===a.readyState)return e(200!==a.status?a.status?a.status:500:null)}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;var o=window.localStorage.getItem("ds_token"),a=new window.XMLHttpRequest;a.open("POST",v+":3010/api/delete",!0),a.setRequestHeader("Authorization","bearer "+o),a.setRequestHeader("Content-type","application/json"),a.onreadystatechange=n,a.send(window.JSON.stringify({user:_,repo:m,filename:"example.pdf"}))}function l(t){function e(){if(4===o.readyState){if(200!==o.status)return t(o.status?o.status:500);var e;try{e=JSON.parse(o.responseText)}catch(n){return t(500)}return t(null,e)}}var n=window.localStorage.getItem("ds_token"),o=new XMLHttpRequest;o.open("POST",v+":3010/api/list",!0),o.setRequestHeader("Authorization","bearer "+n),o.setRequestHeader("Content-type","application/json"),o.onreadystatechange=e,o.send(JSON.stringify({}))}function c(t){function e(){if(4===o.readyState){if(200!==o.status)return t(o.status?o.status:500);try{return t(null,JSON.parse(o.responseText))}catch(e){return t(500)}}}var n=window.localStorage.getItem("ds_token"),o=new XMLHttpRequest;o.open("POST",v+":3010/api/server_versions",!0),o.setRequestHeader("Authorization","bearer "+n),o.setRequestHeader("Content-type","application/json"),o.onreadystatechange=e,o.send(JSON.stringify({}))}function w(t){function e(){if(4===o.readyState){if(200!==o.status)return t(o.status?o.status:500);var e;try{e=JSON.parse(o.responseText).startup}catch(n){return t(500)}return t(null,e)}}var n=window.localStorage.getItem("ds_token"),o=new XMLHttpRequest;o.open("GET",v+":3010/api/startup",!0),o.setRequestHeader("Authorization","bearer "+n),o.onreadystatechange=e,o.send()}function y(t,e){function n(){if(4===a.readyState)return e(200!==a.status?a.status?a.status:500:null)}var o=window.localStorage.getItem("ds_token"),a=new XMLHttpRequest;a.open("POST",v+":3010/api/startup",!0),a.setRequestHeader("Authorization","bearer "+o),a.setRequestHeader("Content-type","application/json"),a.onreadystatechange=n,a.send(JSON.stringify({startup:t}))}function g(t,e,n){function o(){if(4===s.readyState)return n(200!==s.status?s.status?s.status:500:null)}var a=window.localStorage.getItem("ds_token"),s=new XMLHttpRequest;s.open("POST",v+":3010/api/update",!0),s.setRequestHeader("Authorization","bearer "+a),s.setRequestHeader("Content-type","application/json"),s.onreadystatechange=o,s.send(JSON.stringify({user:t,repo:e}))}function S(t,e,n){function o(){if(4===s.readyState)return n(200!==s.status?s.status?s.status:500:null)}var a=window.localStorage.getItem("ds_token"),s=new XMLHttpRequest;s.open("POST",v+":3010/api/install",!0),s.setRequestHeader("Authorization","bearer "+a),s.setRequestHeader("Content-type","application/json"),s.onreadystatechange=o,s.send(JSON.stringify({user:t,repo:e}))}function h(){window.location.reload()}var v,_,m,q={};q.setBase=t,q.setRepo=e,q.addAdminTools=n,q.login=o,q.logout=a,q.authenticated=s,q.getToken=r,q.loginToken=i,q.downloadObject=u,q.uploadObject=d,q.uploadFile=p,q.remove=f,q.list=l,q.getServerVersions=c,q.getStartup=w,q.setStartup=y,q.install=S,q.update=g,window.ds=q}();